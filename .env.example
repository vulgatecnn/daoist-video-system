# 道教视频系统环境变量配置模板
# 复制此文件为 .env 并填入实际值

# ===========================================
# 基础配置
# ===========================================

# 环境类型 (development/staging/production)
ENVIRONMENT=production

# Django 配置
SECRET_KEY=your-secret-key-here
DEBUG=False
ALLOWED_HOSTS=localhost,127.0.0.1,your-domain.com

# CORS 配置
CORS_ALLOWED_ORIGINS=https://your-domain.com,https://api.your-domain.com

# ===========================================
# 数据库配置
# ===========================================

# PostgreSQL 配置
DB_NAME=daoist_video_db
DB_USER=postgres
DB_PASSWORD=your-db-password
DB_HOST=db
DB_PORT=5432

# 数据库 URL (自动生成，通常不需要修改)
DATABASE_URL=postgres://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# ===========================================
# Redis 配置
# ===========================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0

# ===========================================
# 文件存储配置
# ===========================================

# 媒体文件配置
MEDIA_ROOT=/app/media
MEDIA_URL=/media/

# 静态文件配置
STATIC_ROOT=/app/staticfiles
STATIC_URL=/static/

# 文件上传限制 (MB)
MAX_UPLOAD_SIZE=100

# ===========================================
# 视频处理配置
# ===========================================

# FFmpeg 路径
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe

# 视频处理队列配置
VIDEO_PROCESSING_TIMEOUT=3600
MAX_CONCURRENT_JOBS=2

# ===========================================
# 邮件配置
# ===========================================

EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-email-password
DEFAULT_FROM_EMAIL=your-email@gmail.com

# ===========================================
# 安全配置
# ===========================================

# HTTPS 配置
SECURE_SSL_REDIRECT=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# Session 安全
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True

# ===========================================
# 日志配置
# ===========================================

LOG_LEVEL=INFO
LOG_FILE=/app/logs/django.log

# ===========================================
# 监控配置
# ===========================================

# Sentry 错误监控 (可选)
SENTRY_DSN=your-sentry-dsn

# Prometheus 监控
PROMETHEUS_METRICS_ENABLED=True

# ===========================================
# 第三方服务配置
# ===========================================

# 云存储配置 (可选)
USE_S3=False
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_STORAGE_BUCKET_NAME=your-bucket-name
AWS_S3_REGION_NAME=us-east-1

# ===========================================
# Docker 配置
# ===========================================

# Docker Hub 用户名 (用于生产环境镜像)
DOCKER_USERNAME=your-docker-username

# ===========================================
# 监控和告警配置
# ===========================================

# Grafana 配置
GRAFANA_PASSWORD=your-grafana-password

# 告警通知
SLACK_WEBHOOK=your-slack-webhook-url
ALERT_EMAIL=admin@your-domain.com

# ===========================================
# 备份配置
# ===========================================

# 数据库备份
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket

# ===========================================
# 性能配置
# ===========================================

# Gunicorn 配置
GUNICORN_WORKERS=4
GUNICORN_TIMEOUT=120

# Celery 配置
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_SOFT_TIME_LIMIT=300
CELERY_TASK_TIME_LIMIT=600